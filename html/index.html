<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="../css/style.css">
  <title> Калькулятор1 </title>
</head>>


<style>
  .button-wrapper {
    width: 25px;
    height: 17px;
    background: linear-gradient(180deg, #18476B -5.2%, #2771AA 45.84%, #081925 119.3%);
    border-radius: 1px;
    display: flex;
    align-items: center;
    justify-content: center;

  }



  .button {
    padding: 0;
    border: none;
    background-color: transparent;
    width: 23px;
    height: 15px;
    background: linear-gradient(175.68deg, #328CD0 19.86%, #081925 270.14%);
    border-radius: 2px;

  }

  .button-container-wrapper {
    width: 100%;
    height: 100%;
    border-radius: 2px;
    background: linear-gradient(0deg, #4EA4DC -874.3%, #2BAFDE 180.3%);
    transform: skew(-2deg, -.5deg);
    transform-origin: bottom right;
    display: flex;
    justify-content: center;

  }

  .calculator {
    user-select: none;
    background: linear-gradient(180deg, #4EA4DC 51.6%, #081925 161.2%);
    border-radius: 8px;
    padding-top: 27px;
    padding-bottom: 11px;
    padding-left: 9px;
    padding-right: 9px;
    display: inline-block;


  }


  .button-container {
    display: flex;
    justify-content: center;
  }

  .knopki {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr 1fr;
    grid-gap: 4px;
  }

  .column1 {
    display: grid;
    grid-template-rows: 1fr 1fr 1fr 1fr 1fr 1fr;
    grid-gap: 3px;
  }

  .column2 {
    display: grid;
    grid-template-rows: 1fr 1fr 1fr 1fr 1fr 1fr;
    grid-gap: 3px;
  }

  .column3 {
    display: grid;
    grid-template-rows: 1fr 1fr 1fr 1fr 1fr 1fr;
    grid-gap: 3px;
  }

  .column4 {
    display: grid;
    grid-template-rows: 1fr 1fr 1fr 1fr 2fr 0;
    grid-gap: 3px;
  }

  .plus {
    height: 38px;

  }



  .calc {
    padding: 0;
    border: none;
    width: 133px;
    display: inline-flex;
    background: linear-gradient(175.68deg, #328CD0 19.86%, #081925 270.14%);
    border-radius: 8px;
  }

  .calc-wrapper {
    width: 135px;
    height: 200px;
    background: linear-gradient(180deg, #2771AA -3.6%, #081925 71.1%);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    /*transform: skew(-2deg, -.5deg);
     transform-origin: bottom right;*/
  }



  textarea {
    resize: none;
    margin-bottom: 6px;
    border: solid;
    border-width: 1px;
    border-color: #1A5C88;
    border-radius: 3px;
  }
</style>

<body>
  <div class="calc-wrapper">
    <div class="calc">
      <div class="calc-content">
        <div class="calculator">
          <div class="screen-wrapper">
            <div class="screenik">
              <div class="screen-content">
                <div class="screen"><textarea name="comment" maxlength="14" cols="13" rows="1"></textarea> </div>
              </div>
            </div>
          </div>
          <div class="knopki">
            <div class="column1">

              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" onclick="clean()">
                      <img src="../img/svg/o.svg" alt="sev" class="sevv">
                      <img src="../img/svg/f.svg" alt="sev" class="sevv">
                      <img src="../img/svg/f.svg" alt="sev" class="sevv">
                    </div>
                  </div>
                </button>
              </div>

              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" onclick="mrc()">
                      <img src="../img/svg/m.svg" alt="sev" class="sevv">
                      <img src="../img/svg/r.svg" alt="sev" class="sevv">
                      <img src="../img/svg/c.svg" alt="sev" class="sevv">
                    </div>
                  </div>
                </button>
              </div>
              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" button-value="7" onclick="pressNumber(7)">
                      <img src="../img/svg/seven.svg" alt="sev" class="sevv">
                    </div>
                  </div>
                </button>
              </div>

              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" button-value="4" onclick="pressNumber(4)">
                      <img src="../img/svg/four.svg" alt="fo" class=foo>
                    </div>
                  </div>
                </button>
              </div>
              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" button-value="1" onclick="pressNumber(1)">
                      <img src="../img/svg/one.svg" alt="onee" class="oneee">
                    </div>
                  </div>
                </button>
              </div>
              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" button-value="0" onclick="pressNumber(0)">
                      <img src="../img/svg/zero.svg" alt="zer" class="ze">
                    </div>
                  </div>
                </button>
              </div>
            </div>


            <div class="column2">
              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" onclick="plusMinus()">
                      <img src="../img/svg/litplus.svg" alt="sev" class="sevv">
                      <img src="../img/svg/pai.svg" alt="sev" class="sevv">
                      <img src="../img/svg/litmin.svg" alt="sev" class="sevv">
                    </div>
                  </div>
                </button>
              </div>
              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" onclick="minm()">
                      <img src="../img/svg/m.svg" alt="sev" class="sevv">
                      <img src="../img/svg/litmin.svg" alt="sev" class="sevv">
                    </div>
                  </div>
                </button>
              </div>
              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" button-value="8" onclick="pressNumber(8)">
                      <img src="../img/svg/eight.svg" alt="eigh" class="eighr">
                    </div>
                  </div>
                </button>
              </div>

              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" button-value="5" onclick="pressNumber(5)">
                      <img src="../img/svg/five.svg" alt="fi" class=fvo>
                    </div>
                  </div>
                </button>
              </div>
              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" button-value="2" onclick="pressNumber(2)">
                      <img src="../img/svg/two.svg" alt="tw" class="tw">
                    </div>
                  </div>
                </button>
              </div>
              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" onclick="pressOpp('.')">
                      <img src="../img/svg/dot.svg" alt="do" class="ddo">
                    </div>
                  </div>
                </button>
              </div>
            </div>


            <div class="column3">

              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" onclick="rooot()">
                      <img src="../img/svg/root.svg" alt="sev" class="sevv">
                    </div>
                  </div>
                </button>
              </div>
              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" onclick="maxm()">
                      <img src="../img/svg/m.svg" alt="sev" class="sevv">
                      <img src="../img/svg/litplus.svg" alt="sev" class="sevv">
                    </div>
                  </div>
                </button>
              </div>
              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" button-value="9" onclick="pressNumber(9)">
                      <img src="../img/svg/nine.svg" alt="eigh" class="eighr">
                    </div>
                  </div>
                </button>
              </div>

              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" button-value="6" onclick="pressNumber(6)">
                      <img src="../img/svg/six.svg" alt="fi" class=fvo>
                    </div>
                  </div>
                </button>
              </div>
              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" button-value="3" onclick="pressNumber(3)">
                      <img src="../img/svg/three.svg" alt="tw" class="tw">
                    </div>
                  </div>
                </button>
              </div>
              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" onclick="equal()">
                      <img src="../img/svg/equa.svg" alt="do" class="ddo">
                    </div>
                  </div>
                </button>
              </div>
            </div>
            <div class="column4">
              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" onclick="prozent()">
                      <img src="../img/svg/degree.svg" alt="sev" class="sevv">
                      <img src="../img/svg/pai.svg" alt="sev" class="sevv">
                      <img src="../img/svg/degree.svg" alt="sev" class="sevv">
                    </div>
                  </div>
                </button>
              </div>
              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" onclick="pressOpp('/')">
                      <img src="../img/svg/pai.svg" alt="sev" class="sevv">
                    </div>
                  </div>
                </button>
              </div>
              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" onclick="pressOpp('*')">
                      <img src="../img/svg/multiply.svg" alt="eigh" class="eighr">
                    </div>
                  </div>
                </button>
              </div>

              <div class="button-wrapper">
                <button class="button">
                  <div class="button-container-wrapper">
                    <div class="button-container" onclick="pressOpp('-')">
                      <img src="../img/svg/minus.svg" alt="fi" class=fvo>
                    </div>
                  </div>
                </button>
              </div>
              <div class="button-wrapper plus">
                <button class="button plus">
                  <div class="button-container-wrapper">
                    <div class="button-container" onclick="pressOpp('+')">
                      <img src="../img/svg/plus.svg" height="10" width="10" alt="tw" class="plus">
                    </div>
                  </div>
                </button>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    var memory = 0;
    var tr = document.querySelector("textarea");
    function pressNumber(num) {
      tr.value = tr.value + num;
    }
    function pressOpp(opper) {
      tr.value = tr.value + opper;
    }
    function clean() {
      tr.value = '';
    }
    function equal() {

      var srt = tr.value;
      /* if (srt) {
         document.querySelector("textarea").value = eval(srt);
       }*/

      var re = /['+'\-'*'\/]/;
      var chis = srt.split(re);
      var re2 = /\d+/;
      var newList = srt.split(re2);
      newList = newList.filter(op => op != "" && op != NaN);
      chis = chis.filter(num => num != "" && num != NaN);
      var index = Prioritet(newList);
      chis = Valera(chis, index);
      newList = newList.filter(op => op != "*" && op != "/");

      var result = chis[0];
      if (newList.length != 0) {
        for (i = 0; i < newList.length; i++) {
          if (newList[i] == "+") {
            chis[i + 1] = (parseFloat(chis[i]) + parseFloat(chis[i + 1])).toString();
            result = parseFloat(chis[i + 1]);
          }
          else {
            chis[i + 1] = (Number(chis[i]) - Number(chis[i + 1])).toString();
            result = Number(chis[i + 1]);
          }
        }
      }

      if (srt) {
        tr.value = result;
      }

    }
    function Prioritet(newList) {
      var index = new Set();
      for (var i = 0; i < newList.length; i++) {
        if (newList[i] == "*") {
          index.add(i.toString());
        }
        else if (newList[i] == "/") {
          if (i == 0) {
            index.add("");
            continue;
          }
          index.add((-i).toString());
        }
      }
      return Array.from(index);
    }
    function Valera(chis, index) {
      var ind;
      for (i = 0; i < index.length; i++) {
        if (Number(index[i]) < 0 || index[i] == "") {
          ind = -Number(index[i]);
          chis[ind + 1] = (Number(chis[ind]) / Number(chis[ind + 1])).toString();
          chis[ind] = "a";
        }
        else {
          ind = Number(index[i]);
          chis[ind + 1] = (Number(chis[ind]) * Number(chis[ind + 1])).toString();
          chis[ind] = "a";
        }
      }
      return chis.filter(num => num != "a");
    }

    function rooot() {
      tr.value = Math.sqrt(tr.value);
    }
    function mrc() {
      tr.value = memory;

    }
    function prozent() {
      srt = tr.value;
      var re = /['+'\-'*'\/]/;
      var chis = srt.split(re);
      var re2 = /\d+/;
      var newList = srt.split(re2);
      newList = newList.filter(op => op != "" && op != NaN);
      chis = chis.filter(num => num != "" && num != NaN);

      var percent = parseFloat(chis[0]) * (parseFloat(chis[1]) / 100);
      var result = 0;
      switch (newList[0]) {
        case "+": result = parseFloat(chis[0]) + percent; break;
        case "-": result = parseFloat(chis[0]) - percent; break;
        case "*": result = percent; break;
        case "/": result = parseFloat(chis[0]) / (parseFloat(chis[1]) / 100); break;
      }
      tr.value = result;
debugger

    }
    function plusMinus() {
      tr.value = parseFloat(tr.value) * (-1);
    }

    function minm() {
      memory -= parseFloat(tr.value);
    }
    function maxm() {
      memory += parseFloat(tr.value);

    }


  </script>

</body>

</html>